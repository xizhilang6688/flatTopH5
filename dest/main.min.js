define("main",function(){!function(){!function(){"use strict";var a=$(document),b=$("body"),c={bear:{title:"你在森林中独行，突然出现一只黑熊，你该怎么办？",option:["赶紧跑，跑得比刘翔还快","倒地装死，一动不动","和它说话,让熊知道你没恶意","扔过去食物,然后慢慢撤退"],result:1},valley:{title:"被困山里如何快速发出求救信号？",option:["点燃火堆引起注意","大声呼喊求救","地面上画出SOS符号","自己默默找出路"],result:0},seed:{title:"如果允许你带种子去荒山生活，你将选择哪种？",option:["玉米","马铃薯","葡萄","西红柿"],result:0},snake:{title:"以下哪种蛇是毒蛇？",option:["火赤练蛇","百步蛇","帕布拉奶蛇","翠青蛇"],result:1},thunder:{title:"野外露营遇到雷暴天气，怎么做最安全？",option:["躲到附近的大树下","躲到可以避雨的大石头下","躲在帐篷里不出来","转移到远离树木的低地处"],result:3},boating:{title:"你正在河道里划船，什么情景预示洪水要来了？",option:["天空变得乌黑","水位上涨,水变得混浊","潮湿的风吹过河谷","闻到湿漉漉的味道"],result:1},chef:{title:"平顶厨房要开饭啦，你打算为大家做些什么呢？",option:["鸡棚那只鸡和蘑菇炖了吧","土豆丰收啦,土豆丝最赞","杀头牛来份牛排解解馋","刚收获的鸡蛋都煮了吧"],result:1}},d='        <div class="loadingAni" style="display:none">           <div class="inner">            <div class="fengche">                <b class="box box1"></b><b class="box box2"></b><b class="box box3"></b><b class="box box4"></b>            </div>            <h4>生存天数计算中...</h4>        </div></div>         <div id="animalchanger">          <div class="level-one">            <div class="wrap left-to-right">              <%for(var i = 0; i < shardCount; i++) {%>              <div class="shard-wrap"><div class="shard"></div></div>              <%}%>            </div>          </div>          <div class="title">            <%for(var i = 0; i < titleSubElementCount; i++) {%>            <div class="triangle"></div>            <%}%>            <div class="titleNum num1"></div>          </div>          <div class="answerList">            <h1></h1>            <ul>              <%for(var i = 0; i < optionsIndex.length; i++) {%>              <li data-index="<%=i%>">                <span class="abcd"><%=optionsIndex[i]%>.</span>                  <p></p>                  <span class="check checked"></span>              </li>              <%}%>            </ul>          </div>          <div class="changePanel"></div>          <div class="changePanelinner"></div>        </div>      ';$.os.ios&&parseFloat($.os.version)>=7.1||$("html").addClass("lowPhone");setInterval(function(){b.removeClass("state-four"),setTimeout(function(){b.addClass("state-two")},100),setTimeout(function(){b.removeClass("state-two"),b.addClass("state-three")},1100),setTimeout(function(){b.removeClass("state-three"),b.addClass("state-four")},2e3)},3e3),setInterval(function(){setTimeout(function(){b.addClass("shimmer")},1e3),setTimeout(function(){b.removeClass("shimmer")},2520)},3520);a.on("startanswer",function(){bosszone("clickA","","","","","","",bossOpenId);var a={shardCount:30,titleSubElementCount:7,optionsIndex:["A","B","C","D"]},e=txTpl(d,a),f=function(){var a=[];return $.each(c,function(b,c){a.push(b)}),a}();b.html(e).addClass("animal-animations-on");var g=$(window).width(),h=.7*g,i=-1*(g/2),j=-1*(h/2)-0;$("#animalchanger .wrap").css({width:g,height:h,"margin-top":j,"margin-left":i}),$("#animalchanger .title").css({width:Math.round(.340625*$(window).width()),height:Math.round(.340625*$(window).width()*.5),bottom:.25*$(window).height()}),b.data("animals",f),b.data("score",0),b.data("answercount",0);var k=$("#animalchanger"),l="bear";k.trigger("askquestion",{animal:l})}),a.on("askquestion","#animalchanger",function(a,d){var e=$(this),f=$(".answerList",e),g=$(".title",e),h=$(".answerList h1",e),i=$(".title .titleNum",e),j=$(".answerList p",e),k=b.data("animal"),l=d.animal,m=b.data("animals"),n=b.data("answercount");m.splice(m.indexOf(l),1),b.data("currentAnimal",l),b.data("animals",m),b.data("animal",l),h.text(c[l].title),$.each(c[l].option,function(a,b){j.eq(a).text(b)}),i.removeClass("num"+n).addClass("num"+(n+1)),$("ul",f).hide(),f.css({top:.72*$(window).height()}),g.css({bottom:.25*$(window).height()}),$(".answerList .current",f).removeClass("current"),$(".answerList .checked",f).removeClass("checked"),$(".changePanel",e).show(),$(".changePanelinner",e).show(),setTimeout(function(){e.removeClass(k+"Two").addClass(l)},16)}),a.on("swipeUp","#animalchanger",function(a){var c=b.data("animal");"Two"!==c.slice(-3)&&$("#animalchanger").trigger("answerquestion")}),a.on("answerquestion","#animalchanger",function(a,c){var d=$(this),e=b.data("animal");d.removeClass(e).addClass(e+"Two"),$(".answerList ul",d).show(),$(".answerList",d).css({top:.38*$(window).height()}),$(".title",d).css({bottom:.6*$(window).height()}),$(".changePanel",d).hide(),$(".changePanelinner",d).hide()}),a.on("tap","#animalchanger .answerList li",function(d){var e=$(this),f=$("#animalchanger"),g=e.parents(".answerList"),h=parseInt(e.data("index")),i=b.data("animals"),j=b.data("animal"),k=parseInt(b.data("score")),l=b.data("answercount");if(!$(".current",g).length){if(e.addClass("current"),$(".check",e).addClass("checked"),c[j].result===h&&(k++,b.data("score",k)),l++,b.data("answercount",l),5===l)return setTimeout(function(){$(".loadingAni").show()},1e3),void setTimeout(function(){a.trigger("showresult")},3e3);var m=Math.floor(i.length*Math.random());j=i[m],setTimeout(function(){f.trigger("askquestion",{animal:j})},500)}}),a.on("touchmove","#animalchanger, .loadingPgae",function(a){a.preventDefault()})}(),function(){"use strict";function a(){if(!window.WeixinJSBridge)return!1;WeixinJSBridge.on("menu:share:timeline",function(a){var b={img_width:"120",img_height:"120",img_url:f.pic,link:f.link,desc:"",title:f.title};WeixinJSBridge.invoke("shareTimeline",b,function(a){WeixinJSBridge.log(a.err_msg)}),bosszone("clickC","","","","","","","")}),WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",{content:f.desc,url:f.link},function(a){WeixinJSBridge.log(a.err_msg)}),bosszone("clickC","","","","","","","")}),WeixinJSBridge.on("menu:share:appmessage",function(a){WeixinJSBridge.invoke("sendAppMessage",{img_width:"120",img_height:"120",img_url:f.pic,link:f.link,desc:f.title,title:"世界那么大，你敢孤身闯荡么？"},function(a){WeixinJSBridge.log(a.err_msg)}),bosszone("clickC","","","","","","","")});var a="com.tencent.fifteen",b="tencentfifteen://";return WeixinJSBridge.invoke("getInstallState",{packageName:a,packageUrl:b},function(a){~a.err_msg.indexOf("get_install_state:yes")&&($(".download h2 a").text("打开《我们15个》24小时直播生存挑战").attr("href",b+"client/review"),window.setdownloadhref=function(){$(".download h2 a").text("打开《我们15个》24小时直播生存挑战").attr("href",b+"client/review")})}),!0}var b=$(document),c=$("body"),d={0:{title:"经专业鉴定，你的基因不适合探险哈！",share:"我的生存天数是<%=day%>天，外面的世界好可怕，我想静静！"},1:{title:"我一定不会告诉别人，你真的太弱啦！",share:"我的生存天数是<%=day%>天，这么弱我也是醉了，你也来试试吧！"},2:{title:"再锻炼下就能出去闯荡江湖了！",share:"我的生存天数是<%=day%>天，再锻炼下就能冒险啦，你也来试试吧！"},3:{title:"压线及格最骄傲，其他不重要！",share:"我的生存天数是<%=day%>天，真正的能力者等你来挑战！"},4:{title:"食物链顶端的勇士，集体膜拜中！",share:"我的生存天数是<%=day%>天，国产版贝爷独孤求败，等你来挑战！"},5:{title:"食物链顶端的勇士，集体膜拜中！",share:"我的生存天数是<%=day%>天，国产版贝爷独孤求败，等你来挑战！"}},e='        <div class="resultPage">            <div class="img"><img src="<%=headimgurl || "http://mat1.gtimg.com/v/h5/we15/images/avatar.png"%>" /><span></span></div>            <div class="txt">              <b>生存<span><%=day%></span>天</b>              <p><%=results[score].title%></p>            </div>            <div class="download">              <h2><a href="http://u15.video.qq.com/web/info/download">下载《我们15个》24小时直播生存挑战</a></h2>               <div class="video">                <video id="video" webkit-playsinline controls="controls" controls="controls" src="http://mat1.gtimg.com/v/h5/we15/images/video.mp4"  poster="http://mat1.gtimg.com/v/h5/we15/images/video.jpg">您的浏览器不支持 video 标签。</video>              </div>              <p>好莱坞会员7天免费观看直播特权</p>            </div>            <div class="friends">              <h2>能力者们</h2>              <div class="bd">                <ul>                  <%var i = 0%>                  <%$.each(friends, function(k, friend) {%>                  <% if(i==0){ %>                  <li class="on">                   <% }else { %>                  <li>                  <% } %>                      <em><%=++i%></em>                      <img src="<%=friend.headimgurl || "http://mat1.gtimg.com/v/h5/we15/images/avatar.png"%>" alt="" />                      <div class="box">                          <div class="name"><%=friend.nickname%></div>                          <div class="day">生存天数<span><%=friend.day%></span></div>                          <div class="line"><div class="bg" style="width:<%=friend.day%>%"></div></div>                      </div>                  </li>                  <%})%>                </ul>              </div>            </div>            <div class="pkfriend">喊好友来PK</div>            <div class="share">              <div class="angin">再玩一次</div>            </div>        </div>      ';b.on("showresult",function(a,b){var g,h,i,j=c.data("userinfo"),k=c.data("friends"),l=c.data("fromid");b?(h=b.day,g=h>=70?4:h>=50?3:h>=30?2:h>=10?1:0,c.data("score",g)):(g=parseInt(c.data("score")),h=function(a){return 0===a?0:(5===a&&(a=4),Math.floor(20*a-10+20*Math.random()))}(g),$.post("/web/weChatGame/record",{fromid:l,score:h},function(a){})),c.data("day",h),i={score:g,day:h,results:d,headimgurl:j.headimgurl,friends:k},c.html(txTpl(e,i));var m=document.getElementById("video");m.addEventListener("error",function(a){$("#video").attr("src","http://mat1.gtimg.com/v/h5/we15/images/video.mp4")},!0);var n=c.data();n&&n.userinfo&&n.userinfo.uid&&(f={title:txTpl(d[n.score].share,{day:h}),desc:txTpl(d[n.score].share,{day:h}),pic:"http://mat1.gtimg.com/v/h5/we15/images/u15icon.png",link:window.location.href+"?formid="+n.userinfo.uid}),window.setdownloadhref&&window.setdownloadhref()}),b.on("tap",".resultPage .angin",function(){b.trigger("startanswer"),bosszone("clickB","","","","","","","")}),b.on("tap",".download h2",function(){bosszone("clickB","","","","","","","")});var f={title:"90%的人都答不对的生存挑战题，你敢赌上智商试试不？",desc:"90%的人都答不对的生存挑战题，你敢赌上智商试试不？",pic:"http://mat1.gtimg.com/v/h5/we15/images/u15icon.png",link:window.location.href};!a()&&document.addEventListener("WeixinJSBridgeReady",function(){a()})}()}()});